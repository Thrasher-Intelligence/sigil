/* Starshine Theme - CSS Variables */
:root {
  /* Message Text Colors (will be overridden in light mode) */
  --user-message-text-color: #F0E6FF; /* Light text for user bubbles in dark mode */
  --assistant-message-text-color: #F0E6FF; /* Light text for assistant bubbles in dark mode */
  --foreground: #F0E6FF; /* Text color for messages in dark mode */
  
  --button-background-base: #00E0C6; /* palette-4: Used for button background base */
  --header-text-color: #FF007C; /* palette-9: Used for header text (chat, settings) */
  --input-text-color: #F0E6FF; /* palette-15/foreground: Used for text in settings inputs/textareas, brightened for contrast */
  --ui-text-primary: #F0E6FF; /* Default UI text color - palette-15/foreground, brightened for contrast */
  --user-message-glow-color: #FF4F4F; /* palette-1 */
  --backend-message-glow-color: #FF007C; /* palette-9 */
  
  /* Chat Message Styling */
  --user-bubble-bg: rgba(255, 79, 79, 0.4); /* Stronger red tint from user-message-glow for higher contrast */
  --user-bubble-border: rgba(255, 79, 79, 0.7); /* From user-message-glow, bolder for contrast */
  --user-bubble-glow: rgba(255, 79, 79, 0.3); /* Enhanced glow effect */
  --assistant-bubble-bg: rgba(255, 0, 124, 0.3); /* Stronger pink tint from backend-message-glow for higher contrast */
  --assistant-bubble-border: rgba(255, 0, 124, 0.6); /* From backend-message-glow, bolder for contrast */
  --assistant-bubble-glow: rgba(255, 0, 124, 0.25); /* Enhanced glow effect */
  
  /* Code Block Styling - Dark Mode */
  --code-block-bg: rgba(25, 24, 37, 0.85); /* Dark purple background for code blocks */
  --code-block-border: rgba(255, 0, 124, 0.5); /* Pink border for code blocks */
  --inline-code-bg: rgba(30, 29, 42, 0.75); /* Dark purple background for inline code */
  --code-text-color: #F0E6FF; /* Light purple text for code */
  --code-block-bg-light: rgba(245, 245, 250, 0.85); /* Soft pastel background for code blocks */
  --code-block-border-light: rgba(255, 95, 198, 0.5); /* Pink border for light mode code blocks */
  --inline-code-bg-light: rgba(240, 240, 245, 0.75); /* Soft pastel background for inline code */
  --code-text-color-light: #3a3a5a; /* Dark purple text for code */
  --code-keyword-color: #FF5FC6; /* Bright pink for keywords */
  --code-string-color: #00E0C6; /* Teal for strings */
  --code-comment-color: #826C99; /* Muted purple for comments */
  --code-variable-color: #FF9E64; /* Orange for variables */
  --code-number-color: #FF007C; /* Pink for numbers */
  --code-type-color: #00E0C6; /* Teal for types */
  --code-keyword-color-light: #5a4abd; /* Dark purple for keywords */
  --code-string-color-light: #00a396; /* Dark teal for strings */
  --code-comment-color-light: #8a8a94; /* Medium gray for comments */
  --code-variable-color-light: #e86c00; /* Dark orange for variables */
  --code-number-color-light: #d4006e; /* Dark pink for numbers */
  --code-type-color-light: #00a396; /* Dark teal for types */
  
  /* Tab Styling */
  --tab-inactive-bg: rgba(60, 43, 62, 0.8); /* Darker variant of surface */
  --tab-inactive-color: #826C99; /* palette-8 */
  --tab-hover-bg: rgba(0, 224, 198, 0.2); /* Light variant of primary */
  --tab-hover-color: #A688C9; /* Lighter text on hover */
  --tab-active-bg: rgba(255, 95, 198, 0.2); /* Subtle pink background from palette-13 */
  --tab-active-color: #FF5FC6; /* palette-13 */
  --tab-border-color: rgba(130, 108, 153, 0.4); /* Subtle border from palette-8 */
  --tab-active-border-color: rgba(255, 95, 198, 0.5); /* Stronger border for active tab */
  --tab-container-border-color: rgba(130, 108, 153, 0.4); /* Border below tabs */

  /* --- NEW: Light/Dark Mode Backgrounds --- */
  /* Default (Dark Mode) */
  --background-dark: #2C1B2E; /* palette-0/background */
  --surface-dark: #3C2B3E; /* Slightly lighter than background */
  --panel-bg-dark: #4C3B4E; /* Even lighter for panels */

  /* Light Mode Variations (Adjusted for Readability) */
  --background-light: #e4e6e8; /* Darker Grey-Blue (Night Sky) - less bright */
  --surface-light: #e8e7ec; /* Darker Lavender (Nebula) - easier on eyes */
  --panel-bg-light: #d8dae6; /* Darker Indigo/Lavender - reduced brightness */

  /* --- NEW: Input Area Colors --- */
  --input-bg-dark: #3C2B3E; /* Slightly lighter than background */
  --input-bg-light: #f0f0f5; /* Off-white - less harsh than pure white */
  --disabled-bg-dark: #4C3B4E; /* Lighter shade */
  --disabled-bg-light: #d8dae0; /* Muted Lavender/Grey */
  --disabled-fg-dark: #826C99; /* palette-8 */
  --disabled-fg-light: #9090a0; /* Muted Purple/Grey */

  /* --- NEW: Panel Tab/Container Colors --- */
  --panel-tab-bg-dark: #3C2B3E; /* Slightly lighter than background */
  --panel-tab-bg-light: #e8eaf6; /* Match panel bg light */
  --panel-tab-active-bg-dark: #4C3B4E; /* Even lighter for active tabs */
  --panel-tab-active-bg-light: #f8f7fc; /* Match surface light */
  --panel-tab-text-dark: #826C99; /* palette-8 */
  --panel-tab-text-light: #6a5acd; /* Slate Blue (Twilight) */
  --panel-tab-active-text-dark: #FF5FC6; /* palette-13 */
  --panel-tab-active-text-light: #4a4a6a; /* Deep Space Purple/Grey */
  --panel-container-bg-dark: #4C3B4E; /* Match panel-bg-dark */
  --panel-container-bg-light: #e8eaf6; /* Match panel bg light */

  /* --- NEW: Button Colors --- */
  --primary-dark: #00E0C6; /* palette-4 */
  --primary-light: #fffacd; /* Lemon Chiffon (Star Glow) */
  --primary-hover-dark: #00C896; /* palette-2/10 - Darker version */
  --primary-hover-light: #f8f8d0; /* Slightly darker yellow */
  --button-foreground-dark: #2C1B2E; /* palette-0/background - Dark text on primary */
  --button-foreground-light: #5a5a3a; /* Dark text on light yellow */

  --button-bg-dark: #912F56; /* palette-6/14 */
  --button-bg-light: #b0b0d0; /* Medium Lavender/Grey */
  --button-hover-bg-dark: #A13F66; /* Lighter version of palette-6 */
  --button-hover-bg-light: #9a9ac0; /* Darker Lavender/Grey */
  --button-border-dark: #FF5FC6; /* palette-5/13 */
  --button-border-light: #8a8aaf; /* Subtler Lavender/Grey */
  --button-text-dark: #D6C3E5; /* palette-15/foreground */
  --button-text-light: #3a3a5a; /* Dark Purple/Grey Text */

  /* --- NEW: Focus Ring Color --- */
  --primary-focus-dark: rgba(0, 224, 198, 0.4); /* Based on palette-4 */
  --primary-focus-light: rgba(255, 250, 205, 0.6); /* Based on primary-light yellow */

  /* --- NEW: Settings Panel & Input Details --- */
  --surface-input-dark: #3C2B3E; /* Slightly darker than input-bg */
  --surface-input-light: #f0f0f5; /* Off-white - less harsh than pure white */
  --border-input-dark: #826C99; /* palette-8 */
  --border-input-light: #c8cadd; /* Light lavender border */
  --focus-ring-accent-dark: var(--primary-dark); /* Use primary color */
  --focus-ring-accent-light: var(--primary-light);
  --focus-ring-color-dark: var(--primary-focus-dark);
  --focus-ring-color-light: var(--primary-focus-light);
  --text-secondary-dark: #826C99; /* palette-8 */
  --text-secondary-light: #6a5acd; /* Slate Blue (Twilight) */
  --primary-contrast-dark: var(--button-foreground-dark); /* Match primary button text */
  --primary-contrast-light: var(--button-foreground-light);
  --surface-disabled-dark: #4C3B4E; /* Same as --disabled-bg-dark */
  --surface-disabled-light: var(--disabled-bg-light);
  --text-disabled-dark: #826C99; /* palette-8 - Same as --disabled-fg-dark */
  --text-disabled-light: var(--disabled-fg-light);
  --surface-hover-dark: #5C4B5E; /* Lighter than panel background */
  --surface-hover-light: #d2d8e0; /* Darker grey-blue for better contrast */
  --border-input-hover-dark: #A688C9; /* Lighter than palette-8 */
  --border-input-hover-light: #b8bacd; /* Darker lavender border */
  /* --- END NEW --- */

  /* Base variables that will be switched */
  --background: var(--background-dark);
  --surface: var(--surface-dark);
  --panel-bg-color: var(--panel-bg-dark);
  --input-bg: var(--input-bg-dark);
  --disabled-bg: var(--disabled-bg-dark);
  --disabled-fg: var(--disabled-fg-dark);
  --code-block-bg-current: var(--code-block-bg);
  --code-block-border-current: var(--code-block-border);
  --inline-code-bg-current: var(--inline-code-bg);
  --code-text-color-current: var(--code-text-color);
  
  /* Tab Overrides */
  --panel-tab-bg: var(--tab-inactive-bg, var(--panel-tab-bg-dark));
  --panel-tab-active-bg: var(--tab-active-bg, var(--panel-tab-active-bg-dark));
  --panel-tab-text: var(--tab-inactive-color, var(--panel-tab-text-dark));
  --panel-tab-active-text: var(--tab-active-color, var(--panel-tab-active-text-dark));
  --panel-container-bg: var(--panel-container-bg-dark);
  
  /* Chat Bubble Styles */
  --surface-user-msg: var(--user-bubble-bg, var(--surface-dark));
  --surface-backend-msg: var(--assistant-bubble-bg, var(--surface-dark));

  /* Button Base Variables */
  --primary: var(--primary-dark);
  --primary-hover: var(--primary-hover-dark);
  --button-foreground: var(--button-foreground-dark);
  --button-bg: var(--button-bg-dark);
  --button-hover-bg: var(--button-hover-bg-dark);
  --button-border: var(--button-border-dark);
  --button-text: var(--button-text-dark);
  --primary-focus: var(--primary-focus-dark);

  /* Settings Panel Base Variables */
  --surface-input: var(--surface-input-dark);
  --border-input: var(--border-input-dark);
  --focus-ring-accent: var(--focus-ring-accent-dark);
  --focus-ring-color: var(--focus-ring-color-dark);
  --text-secondary: var(--text-secondary-dark);
  --primary-contrast: var(--primary-contrast-dark);
  --surface-disabled: var(--surface-disabled-dark);
  --text-disabled: var(--text-disabled-dark);
  --surface-hover: var(--surface-hover-dark);
  --border-input-hover: var(--border-input-hover-dark);
  /* --- END NEW --- */
}

/* --- Light Mode Overrides --- */
body.light-mode {
  /* Override root colors for light mode */
  --ui-text-primary: #3a3a5a; /* Darker Deep Space Purple/Grey - better contrast */
  --input-text-color: #3a3a5a;
  --header-text-color: #5a4abd; /* Darker Slate Blue (Twilight) - reduced brightness */
  --user-message-glow-color: #efeabd; /* Darker Lemon Chiffon Glow - less bright */
  --backend-message-glow-color: #90d6d0; /* Darker Teal/Cyan Glow - reduced brightness */
  --button-background-base: #efeabd; /* Override original mapping - matching primary-light */
  --user-message-text-color: #3a3a5a; /* Dark text for user bubbles */
  --assistant-message-text-color: #3a3a5a; /* Dark text for assistant bubbles */
  --foreground: #3a3a5a; /* Text color for all messages in light mode */
  
  /* Chat Message Light Mode Overrides */
  --user-bubble-bg: rgba(239, 234, 189, 0.4); /* Higher contrast yellow tint from primary-light */
  --user-bubble-border: rgba(239, 234, 189, 0.8); /* From primary-light, bolder for higher contrast */
  --user-bubble-glow: rgba(239, 234, 189, 0.3); /* Enhanced glow */
  --assistant-bubble-bg: rgba(144, 214, 208, 0.35); /* Higher contrast teal from backend-message-glow */
  --assistant-bubble-border: rgba(144, 214, 208, 0.7); /* From backend-message-glow, bolder for contrast */
  --assistant-bubble-glow: rgba(144, 214, 208, 0.25); /* Enhanced glow */
  
  /* Tab Light Mode Overrides */
  --tab-inactive-bg: rgba(216, 218, 230, 0.8); /* Darker variant of panel-bg-light */
  --tab-inactive-color: #6a5acd; /* Slate Blue (Twilight) */
  --tab-hover-bg: rgba(239, 234, 189, 0.4); /* Darker yellow from primary-light */
  --tab-hover-color: #5a5a9a; /* Darker purple on hover */
  --tab-active-bg: rgba(144, 214, 208, 0.25); /* Darker teal from backend-message-glow */
  --tab-active-color: #4a4a6a; /* Match ui-text-primary */
  --tab-border-color: rgba(200, 202, 221, 0.8); /* Light border from border-input-light */
  --tab-active-border-color: rgba(106, 90, 205, 0.5); /* Purple border for active tab */
  --tab-container-border-color: rgba(200, 202, 221, 0.8); /* Light border below tabs */

  /* Base */
  --background: var(--background-light);
  --surface: var(--surface-light);
  --panel-bg-color: var(--panel-bg-light);
  --input-bg: var(--input-bg-light);
  --disabled-bg: var(--disabled-bg-light);
  --disabled-fg: var(--disabled-fg-light);

  /* Panel Tabs */
  --panel-tab-bg: var(--tab-inactive-bg, var(--panel-tab-bg-light));
  --panel-tab-active-bg: var(--tab-active-bg, var(--panel-tab-active-bg-light));
  --panel-tab-text: var(--tab-inactive-color, var(--panel-tab-text-light));
  --panel-tab-active-text: var(--tab-active-color, var(--panel-tab-active-text-light));
  --panel-container-bg: var(--panel-container-bg-light);
  
  /* Chat Bubble Styles - Light Mode */
  --surface-user-msg: var(--user-bubble-bg, var(--surface-light));
  --surface-backend-msg: var(--assistant-bubble-bg, var(--surface-light));

  /* Button Base Variables */
  --primary: var(--primary-light);
  --primary-hover: var(--primary-hover-light);
  --button-foreground: var(--button-foreground-light);
  --button-bg: var(--button-bg-light);
  --button-hover-bg: var(--button-hover-bg-light);
  --button-border: var(--button-border-light);
  --button-text: var(--button-text-light);
  --primary-focus: var(--primary-focus-light);

  /* Settings Panel Base Variables */
  --surface-input: var(--surface-input-light);
  --border-input: var(--border-input-light);
  --focus-ring-accent: var(--focus-ring-accent-light);
  --focus-ring-color: var(--focus-ring-color-light);
  --text-secondary: var(--text-secondary-light);
  --primary-contrast: var(--primary-contrast-light);
  --surface-disabled: var(--surface-disabled-light);
  --text-disabled: var(--text-disabled-light);
  --surface-hover: var(--surface-hover-light);
  --border-input-hover: var(--border-input-hover-light);
  --code-block-bg-current: var(--code-block-bg-light);
  --code-block-border-current: var(--code-block-border-light);
  --inline-code-bg-current: var(--inline-code-bg-light);
  --code-text-color-current: var(--code-text-color-light);
}

/* Code block styling for Starshine theme */
.bubbleContent pre {
  background: var(--code-block-bg-current) !important;
  border-left: 2px solid var(--code-block-border-current) !important;
  border-radius: 4px !important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15) !important;
  padding: 1em !important;
  margin: 0.8em 0 !important;
}

.bubbleContent pre code {
  color: var(--code-text-color-current) !important;
  font-family: 'JetBrains Mono', 'Consolas', monospace !important;
  font-size: 0.9em !important;
  line-height: 1.5 !important;
}

.bubbleContent code:not(pre code) {
  background: var(--inline-code-bg-current) !important;
  color: var(--code-text-color-current) !important;
  border: 1px solid var(--code-block-border-current) !important;
  border-radius: 3px !important;
  padding: 0.2em 0.4em !important;
  font-size: 0.85em !important;
  font-family: 'JetBrains Mono', 'Consolas', monospace !important;
}

/* Syntax highlighting for Starshine theme */
.bubbleContent .hljs-keyword,
.bubbleContent .hljs-selector-tag,
.bubbleContent .hljs-title.function_ {
  color: var(--code-keyword-color, #FF5FC6) !important;
}

.bubbleContent .hljs-string,
.bubbleContent .hljs-attr {
  color: var(--code-string-color, #00E0C6) !important;
}

.bubbleContent .hljs-comment {
  color: var(--code-comment-color, #826C99) !important;
}

.bubbleContent .hljs-variable,
.bubbleContent .hljs-template-variable,
.bubbleContent .hljs-regexp {
  color: var(--code-variable-color, #FF9E64) !important;
}

.bubbleContent .hljs-number,
.bubbleContent .hljs-literal {
  color: var(--code-number-color, #FF007C) !important;
}

.bubbleContent .hljs-type,
.bubbleContent .hljs-built_in {
  color: var(--code-type-color, #00E0C6) !important;
}

/* Light mode syntax highlighting */
body.light-mode .bubbleContent .hljs-keyword,
body.light-mode .bubbleContent .hljs-selector-tag,
body.light-mode .bubbleContent .hljs-title.function_ {
  color: var(--code-keyword-color-light, #5a4abd) !important;
}

body.light-mode .bubbleContent .hljs-string,
body.light-mode .bubbleContent .hljs-attr {
  color: var(--code-string-color-light, #00a396) !important;
}

body.light-mode .bubbleContent .hljs-comment {
  color: var(--code-comment-color-light, #8a8a94) !important;
}

body.light-mode .bubbleContent .hljs-variable,
body.light-mode .bubbleContent .hljs-template-variable,
body.light-mode .bubbleContent .hljs-regexp {
  color: var(--code-variable-color-light, #e86c00) !important;
}

body.light-mode .bubbleContent .hljs-number,
body.light-mode .bubbleContent .hljs-literal {
  color: var(--code-number-color-light, #d4006e) !important;
}

body.light-mode .bubbleContent .hljs-type,
body.light-mode .bubbleContent .hljs-built_in {
  color: var(--code-type-color-light, #00a396) !important;
}

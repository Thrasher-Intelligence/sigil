/* Irezumi Theme - CSS Variables */
:root {
  /* Message Text Colors (will be overridden in light mode) */
  --user-message-text-color: #ff4d5a; /* Light text for user bubbles in dark mode */
  --assistant-message-text-color: #ff4d5a; /* Light text for assistant bubbles in dark mode */
  --foreground: #ff4d5a; /* Text color for messages in dark mode */
  
  /* Original Mappings */
  --button-background-base: #777777; /* Mapped to --primary-dark (Grey) */
  --header-text-color: #ff5757;
  --input-text-color: #ff4d5a; /* Base Text (Red) - brightened for higher contrast */
  --ui-text-primary: #ff4d5a; /* Base Text (Red) - brightened for higher contrast */
  --user-message-glow-color: #d4af37; /* Gold for user messages - irezumi style */
  --backend-message-glow-color: #808080; /* Gray for bot responses - irezumi style */
  
  /* Chat Message Styling */
  --user-bubble-bg: rgba(212, 175, 55, 0.4); /* Stronger gold tint from user-message-glow for higher contrast */
  --user-bubble-border: rgba(212, 175, 55, 0.75); /* From user-message-glow, bolder for contrast */
  --user-bubble-glow: rgba(212, 175, 55, 0.35); /* Enhanced glow effect */
  --assistant-bubble-bg: rgba(128, 128, 128, 0.3); /* Stronger gray tint from backend-message-glow */
  --assistant-bubble-border: rgba(128, 128, 128, 0.6); /* From backend-message-glow, bolder for contrast */
  --assistant-bubble-glow: rgba(128, 128, 128, 0.25); /* Enhanced glow effect */
  
  /* Tab Styling */
  --tab-inactive-bg: rgba(42, 42, 42, 0.8); /* Darker variant of surface-dark */
  --tab-inactive-color: #aaaaaa; /* Using disabled fg */
  --tab-hover-bg: rgba(119, 119, 119, 0.2); /* Light variant of primary */
  --tab-hover-color: #e63946; /* Match ui-text-primary */
  --tab-active-bg: rgba(34, 34, 34, 0.9); /* Darker panel-bg-dark */
  --tab-active-color: #ff5757; /* Match header-text-color */
  --tab-border-color: rgba(119, 119, 119, 0.3); /* Subtle border from primary */
  --tab-active-border-color: rgba(230, 57, 70, 0.5); /* Stronger border for active tab */
  --tab-container-border-color: rgba(119, 119, 119, 0.3); /* Border below tabs */

  /* --- Derived & Default Colors --- */
  /* Backgrounds */
  --background-dark: #1a1a1a; /* Very dark grey */
  --surface-dark: #2a2a2a; /* Dark grey */
  --panel-bg-dark: #222222; /* Derived */
  --background-light: #f8f8f8; /* Very light grey */
  --surface-light: #ffffff; /* White */
  --panel-bg-light: #f0f0f0; /* Derived light */

  /* Inputs */
  --input-bg-dark: var(--panel-bg-dark);
  --input-bg-light: #e0e0e0; /* Standard light */
  --disabled-bg-dark: #555555; /* Derived */
  --disabled-bg-light: #bdbdbd; /* Standard light */
  --disabled-fg-dark: #aaaaaa; /* Derived */
  --disabled-fg-light: #757575; /* Standard light */

  /* Panel Tabs */
  --panel-tab-bg-dark: var(--surface-dark);
  --panel-tab-bg-light: #e8e8e8; /* Standard light */
  --panel-tab-active-bg-dark: var(--panel-bg-dark);
  --panel-tab-active-bg-light: #f5f5f5; /* Standard light */
  --panel-tab-text-dark: #aaaaaa; /* Using disabled fg */
  --panel-tab-text-light: #555; /* Standard light */
  --panel-tab-active-text-dark: var(--ui-text-primary);
  --panel-tab-active-text-light: #1f1f1f; /* Standard dark text */
  --panel-container-bg-dark: var(--panel-bg-dark);
  --panel-container-bg-light: #f5f5f5; /* Standard light */

  /* Buttons */
  --primary-dark: #777777; /* Original --button-background-base (Grey) */
  --primary-light: #e63946; /* Using base text red for light primary */
  --primary-hover-dark: #666666; /* Darker grey */
  --primary-hover-light: #c5303e; /* Darker red */
  --button-foreground-dark: #f8f8f8; /* Match light background */
  --button-foreground-light: #ffffff; /* White */

  --button-bg-dark: #444444; /* Derived darker grey */
  --button-bg-light: #ff5757; /* Using header red */
  --button-hover-bg-dark: #555555; /* Using disabled bg */
  --button-hover-bg-light: #e04343; /* Darker header red */
  --button-border-dark: #666666; /* Using hover grey */
  --button-border-light: #d03f3f; /* Derived red border */
  --button-text-dark: var(--ui-text-primary);
  --button-text-light: #ffffff; /* White text on red */

  /* Focus Ring */
  --primary-focus-dark: rgba(119, 119, 119, 0.4);
  --primary-focus-light: rgba(230, 57, 70, 0.5);

  /* Settings Panel & Input Details */
  --surface-input-dark: #333333; /* Derived */
  --surface-input-light: var(--input-bg-light);
  --border-input-dark: #555555; /* Using disabled bg */
  --border-input-light: #b0b0b0; /* Standard light */
  --focus-ring-accent-dark: var(--primary-dark);
  --focus-ring-accent-light: var(--primary-light);
  --focus-ring-color-dark: var(--primary-focus-dark);
  --focus-ring-color-light: var(--primary-focus-light);
  --text-secondary-dark: #aaaaaa; /* Using disabled fg */
  --text-secondary-light: #555; /* Standard light */
  --primary-contrast-dark: var(--button-foreground-dark);
  --primary-contrast-light: var(--button-foreground-light);
  --surface-disabled-dark: var(--disabled-bg-dark);
  --surface-disabled-light: var(--disabled-bg-light);
  --text-disabled-dark: var(--disabled-fg-dark);
  --text-disabled-light: var(--disabled-fg-light);
  --surface-hover-dark: #404040; /* Derived */
  --surface-hover-light: #dcdcdc; /* Standard light */
  --border-input-hover-dark: #777777; /* Using primary grey */
  --border-input-hover-light: #a0a0a0; /* Standard light */

  /* --- Base variables that will be switched --- */
  --background: var(--background-dark);
  --surface: var(--surface-dark);
  --panel-bg-color: var(--panel-bg-dark);
  --input-bg: var(--input-bg-dark);
  --disabled-bg: var(--disabled-bg-dark);
  --disabled-fg: var(--disabled-fg-dark);
  
  /* Tab Overrides */
  --panel-tab-bg: var(--tab-inactive-bg, var(--panel-tab-bg-dark));
  --panel-tab-active-bg: var(--tab-active-bg, var(--panel-tab-active-bg-dark));
  --panel-tab-text: var(--tab-inactive-color, var(--panel-tab-text-dark));
  --panel-tab-active-text: var(--tab-active-color, var(--panel-tab-active-text-dark));
  --panel-container-bg: var(--panel-container-bg-dark);
  
  /* Chat Bubble Styles */
  --surface-user-msg: var(--user-bubble-bg, var(--surface-dark));
  --surface-backend-msg: var(--assistant-bubble-bg, var(--surface-dark));

  /* Button Base Variables */
  --primary: var(--primary-dark);
  --primary-hover: var(--primary-hover-dark);
  --button-foreground: var(--button-foreground-dark);
  --button-bg: var(--button-bg-dark);
  --button-hover-bg: var(--button-hover-bg-dark);
  --button-border: var(--button-border-dark);
  --button-text: var(--button-text-dark);
  --primary-focus: var(--primary-focus-dark);

  /* Settings Panel Base Variables */
  --surface-input: var(--surface-input-dark);
  --border-input: var(--border-input-dark);
  --focus-ring-accent: var(--focus-ring-accent-dark);
  --focus-ring-color: var(--focus-ring-color-dark);
  --text-secondary: var(--text-secondary-dark);
  --primary-contrast: var(--primary-contrast-dark);
  --surface-disabled: var(--surface-disabled-dark);
  --text-disabled: var(--text-disabled-dark);
  --surface-hover: var(--surface-hover-dark);
  --border-input-hover: var(--border-input-hover-dark);
}

/* --- Light Mode Overrides --- */
body.light-mode {
  /* Override root colors for light mode */
  --ui-text-primary: #403c30; /* Darker Tatami Brown/Grey for higher contrast */
  --input-text-color: #403c30;
  --header-text-color: #1f3a4f; /* Dark Blue/Grey */
  --user-message-glow-color: #ffb7c5; /* Cherry Blossom Pink Glow */
  --backend-message-glow-color: #a0d8ef; /* Water Blue Glow */
  --button-background-base: #a0d8ef; /* Override original mapping */
  --user-message-text-color: #403c30; /* Dark text for user bubbles */
  --assistant-message-text-color: #403c30; /* Dark text for assistant bubbles */
  --foreground: #403c30; /* Text color for all messages in light mode */
  
  /* Chat Message Light Mode Overrides */
  --user-bubble-bg: rgba(255, 183, 197, 0.35); /* Stronger pink tint for higher contrast */
  --user-bubble-border: rgba(255, 183, 197, 0.7); /* Bolder pink border */
  --user-bubble-glow: rgba(255, 183, 197, 0.25); /* Enhanced glow */
  --assistant-bubble-bg: rgba(160, 216, 239, 0.3); /* Stronger light blue for higher contrast */
  --assistant-bubble-border: rgba(160, 216, 239, 0.65); /* Bolder blue border */
  --assistant-bubble-glow: rgba(160, 216, 239, 0.25); /* Enhanced glow */
  
  /* Tab Light Mode Overrides */
  --tab-inactive-bg: rgba(230, 226, 216, 0.8); /* Light variant of panel-bg-light */
  --tab-inactive-color: #8a8374; /* Match panel-tab-text-light */
  --tab-hover-bg: rgba(255, 183, 197, 0.15); /* Light pink from primary-light */
  --tab-hover-color: #5c5547; /* Match ui-text-primary */
  --tab-active-bg: rgba(160, 216, 239, 0.12); /* Very light blue */
  --tab-active-color: #1f3a4f; /* Match header-text-color */
  --tab-border-color: rgba(220, 216, 204, 0.8); /* Light border from disabled-bg */
  --tab-active-border-color: rgba(160, 216, 239, 0.5); /* Blue border for active tab */
  --tab-container-border-color: rgba(220, 216, 204, 0.8); /* Light border below tabs */

  /* Base (Tatami Inspired) */
  --background: #f5f1e8; /* Tatami Beige */
  --surface: #faf8f0; /* Lighter Beige/Off-white */
  --panel-bg-color: #e6e2d8; /* Tatami Panel */
  --input-bg: #ffffff; /* White */
  --disabled-bg: #dcd8cc; /* Muted Tatami */
  --disabled-fg: #a8a399; /* Muted Text */

  /* Panel Tabs */
  --panel-tab-bg: var(--tab-inactive-bg, #e6e2d8);
  --panel-tab-active-bg: var(--tab-active-bg, #faf8f0);
  --panel-tab-text: var(--tab-inactive-color, #8a8374);
  --panel-tab-active-text: var(--tab-active-color, #5c5547);
  --panel-container-bg: #e6e2d8;
  
  /* Chat Bubble Styles - Light Mode */
  --surface-user-msg: var(--user-bubble-bg, var(--surface));
  --surface-backend-msg: var(--assistant-bubble-bg, var(--surface));

  /* Button Base Variables (Primary: Cherry Blossom, Default: Water) */
  --primary: #ffb7c5; /* Cherry Blossom Pink */
  --primary-hover: #f8a0af; /* Darker Pink */
  --button-foreground: #1f3a4f; /* Dark Blue/Grey text on Pink */
  --button-bg: #a0d8ef; /* Water Blue */
  --button-hover-bg: #88c6e0; /* Darker Blue */
  --button-border: #77b8d0; /* Subtler Blue */
  --button-text: #1f3a4f; /* Dark Blue/Grey text on Blue */
  --primary-focus: rgba(255, 183, 197, 0.5); /* Pink focus ring */

  /* Settings Panel Base Variables */
  --surface-input: #ffffff;
  --border-input: #dcd8cc; /* Subtle beige border */
  --focus-ring-accent: var(--primary);
  --focus-ring-color: var(--primary-focus);
  --text-secondary: #8a8374; /* Muted brown/grey */
  --primary-contrast: #1f3a4f; /* Dark text on primary pink elements */
  --surface-disabled: var(--disabled-bg);
  --text-disabled: var(--disabled-fg);
  --surface-hover: #f0ece3; /* Slightly darker beige */
  --border-input-hover: #c4bfb0; /* Darker beige border */
}

/* Kanagawa Wave Theme - CSS Variables */
:root {
  /* Message Text Colors (will be overridden in light mode) */
  --user-message-text-color: #f0edd8; /* Light text for user bubbles in dark mode */
  --assistant-message-text-color: #f0edd8; /* Light text for assistant bubbles in dark mode */
  --foreground: #f0edd8; /* Text color for messages in dark mode */
  
  /* Original Mappings */
  --button-background-base: #7e9cd8; /* Mapped to --primary-dark */
  --header-text-color: #d8b670; /* Golden accent color for headers */
  --input-text-color: #f0edd8; /* Base Text - brightened for higher contrast */
  --ui-text-primary: #f0edd8;  /* Base Text - brightened for higher contrast */
  --user-message-glow-color: #88c6e0; /* Surf blue glow */
  --backend-message-glow-color: #5e81ac; /* Storm blue glow */
  
  /* Chat Message Styling */
  --user-bubble-bg: rgba(136, 198, 224, 0.4); /* Stronger blue tint from user-message-glow for higher contrast */
  --user-bubble-border: rgba(136, 198, 224, 0.75); /* From user-message-glow, bolder for contrast */
  --user-bubble-glow: rgba(136, 198, 224, 0.35); /* Enhanced glow effect */
  --assistant-bubble-bg: rgba(94, 129, 172, 0.35); /* Stronger storm blue tint from backend-message-glow */
  --assistant-bubble-border: rgba(94, 129, 172, 0.7); /* From backend-message-glow, bolder for contrast */
  --assistant-bubble-glow: rgba(94, 129, 172, 0.3); /* Enhanced glow effect */
  --bold-text-color: #d8b670; /* Gold accent for bold text */
  
  /* Code Block Styling - Dark Mode */
  --code-block-bg: rgba(26, 30, 41, 0.85); /* Dark background for code blocks */
  --code-block-border: rgba(136, 198, 224, 0.5); /* Blue border for code blocks */
  --inline-code-bg: rgba(30, 34, 45, 0.75); /* Dark background for inline code */
  --code-text-color: #dcd7ba; /* Light text for code */
  --code-keyword-color: #7e9cd8; /* Blue for keywords */
  --code-string-color: #98bb6c; /* Green for strings */
  --code-comment-color: #727169; /* Muted gray for comments */
  --code-variable-color: #ff9e64; /* Orange for variables */
  --code-number-color: #d27e99; /* Pink/red for numbers */
  --code-type-color: #e46876; /* Salmon for types */
  
  /* Tab Styling */
  --tab-inactive-bg: rgba(45, 79, 103, 0.6); /* Lighter variant of surface-dark */
  --tab-inactive-color: #a9a4ac; /* Using disabled fg */
  --tab-hover-bg: rgba(126, 156, 216, 0.2); /* Light variant of primary */
  --tab-hover-color: #dcd7ba; /* Match ui-text-primary */
  --tab-active-bg: rgba(34, 50, 73, 0.9); /* Darker panel-bg-dark */
  --tab-active-color: #d8b670; /* Match header-text-color for gold accent */
  --tab-border-color: rgba(126, 156, 216, 0.3); /* Subtle border from primary */
  --tab-active-border-color: rgba(216, 182, 112, 0.5); /* Stronger border for active tab from gold accent */
  --tab-container-border-color: rgba(126, 156, 216, 0.3); /* Border below tabs */

  /* --- Derived & Default Colors --- */
  /* Backgrounds (Using Kanagawa palette colors where possible) */
  --background-dark: #1f1f28; /* kanagawa.nvim bg_dark */
  --surface-dark: #2d4f67; /* kanagawa.nvim waveBlue2 */
  --panel-bg-dark: #223249; /* Derived */
  --background-light: #f0f8ff; /* Alice Blue (Foam) */
  --surface-light: #f5f5f0; /* Ivory (Sand) */
  --panel-bg-light: #e6f0f5; /* Light Blue/Grey */

  /* Inputs */
  --input-bg-dark: var(--panel-bg-dark);
  --input-bg-light: #ffffff; /* White */
  --disabled-bg-dark: #575268; /* Derived */
  --disabled-bg-light: #d8dee4; /* Lighter grey-blue */
  --disabled-fg-dark: #a9a4ac; /* Derived */
  --disabled-fg-light: #8f98a0; /* Muted grey-blue */

  /* Panel Tabs */
  --panel-tab-bg-dark: var(--surface-dark);
  --panel-tab-bg-light: #e6f0f5; /* Match panel bg light */
  --panel-tab-active-bg-dark: var(--panel-bg-dark);
  --panel-tab-active-bg-light: #f5f5f0; /* Match surface light */
  --panel-tab-text-dark: #a9a4ac; /* Using disabled fg */
  --panel-tab-text-light: #7a7065; /* Driftwood Brown/Grey */
  --panel-tab-active-text-dark: var(--ui-text-primary);
  --panel-tab-active-text-light: #4a5f70; /* Stone Blue/Grey */
  --panel-container-bg-dark: var(--panel-bg-dark);
  --panel-container-bg-light: #e6f0f5; /* Match panel bg light */
  
  /* Code Block Styling - Light Mode */
  --code-block-bg-light: rgba(240, 240, 236, 0.85); /* Soft sand/ivory background for code blocks */
  --code-block-border-light: rgba(193, 154, 73, 0.5); /* Gold border for code blocks */
  --inline-code-bg-light: rgba(230, 228, 220, 0.75); /* Soft beige background for inline code */
  --code-text-color-light: #364755; /* Dark blue-grey text for code */
  --code-keyword-color-light: #5971b2; /* Darker blue for keywords */
  --code-string-color-light: #4d7839; /* Darker green for strings */
  --code-comment-color-light: #888884; /* Medium gray for comments */
  --code-variable-color-light: #c36a3c; /* Darker orange for variables */
  --code-number-color-light: #a1556e; /* Darker pink/red for numbers */
  --code-type-color-light: #a04d5e; /* Darker salmon for types */

  /* Buttons */
  --primary-dark: #7e9cd8; /* Original --button-background-base */
  --primary-light: #6ca0d6; /* Deep Water Blue */
  --primary-hover-dark: #6c7fbc; /* Derived Darker blue */
  --primary-hover-light: #5a8bc4; /* Darker Water Blue */
  --button-foreground-dark: #1f1f28; /* Match dark background */
  --button-foreground-light: #ffffff; /* White */

  --button-bg-dark: #44496a; /* Derived darker blue/purple */
  --button-bg-light: #a0b8d0; /* Lighter Blue */
  --button-hover-bg-dark: #575268; /* Using disabled bg */
  --button-hover-bg-light: #8caccc; /* Darker Lighter Blue */
  --button-border-dark: #7a88a7; /* Derived */
  --button-border-light: #889bb3; /* Slightly darker blue border */
  --button-text-dark: var(--ui-text-primary);
  --button-text-light: #2a3b4a; /* Darker blue text */

  /* Focus Ring */
  --primary-focus-dark: rgba(126, 156, 216, 0.4); /* Based on --primary-dark */
  --primary-focus-light: rgba(108, 160, 214, 0.5); /* Based on --primary-light */

  /* Settings Panel & Input Details */
  --surface-input-dark: #33375a; /* Derived */
  --surface-input-light: #ffffff; /* White */
  --border-input-dark: #575268; /* Using disabled bg */
  --border-input-light: #c0c8d1; /* Lighter grey-blue border */
  --focus-ring-accent-dark: var(--primary-dark);
  --focus-ring-accent-light: var(--primary-light);
  --focus-ring-color-dark: var(--primary-focus-dark);
  --focus-ring-color-light: var(--primary-focus-light);
  --text-secondary-dark: #a9a4ac; /* Using disabled fg */
  --text-secondary-light: #7a7065; /* Driftwood Brown/Grey */
  --primary-contrast-dark: var(--button-foreground-dark);
  --primary-contrast-light: #ffffff; /* White text on primary blue */
  --surface-disabled-dark: var(--disabled-bg-dark);
  --surface-disabled-light: var(--disabled-bg-light);
  --text-disabled-dark: var(--disabled-fg-dark);
  --text-disabled-light: var(--disabled-fg-light);
  --surface-hover-dark: #404363; /* Derived */
  --surface-hover-light: #eaf2f8; /* Very light blue hover */
  --border-input-hover-dark: #7a88a7; /* Using button border */
  --border-input-hover-light: #a8b5c0; /* Slightly darker hover border */

  /* --- Base variables that will be switched --- */
  --background: var(--background-dark);
  --surface: var(--surface-dark);
  --panel-bg-color: var(--panel-bg-dark);
  --input-bg: var(--input-bg-dark);
  --disabled-bg: var(--disabled-bg-dark);
  --disabled-fg: var(--disabled-fg-dark);
  --code-block-bg-current: var(--code-block-bg);
  --code-block-border-current: var(--code-block-border);
  --inline-code-bg-current: var(--inline-code-bg);
  --code-text-color-current: var(--code-text-color);
  
  /* Tab Overrides */
  --panel-tab-bg: var(--tab-inactive-bg, var(--panel-tab-bg-dark));
  --panel-tab-active-bg: var(--tab-active-bg, var(--panel-tab-active-bg-dark));
  --panel-tab-text: var(--tab-inactive-color, var(--panel-tab-text-dark));
  --panel-tab-active-text: var(--tab-active-color, var(--panel-tab-active-text-dark));
  --panel-container-bg: var(--panel-container-bg-dark);
  
  /* Chat Bubble Styles */
  --surface-user-msg: var(--user-bubble-bg, var(--surface-dark));
  --surface-backend-msg: var(--assistant-bubble-bg, var(--surface-dark));

  /* Button Base Variables */
  --primary: var(--primary-dark);
  --primary-hover: var(--primary-hover-dark);
  --button-foreground: var(--button-foreground-dark);
  --button-bg: var(--button-bg-dark);
  --button-hover-bg: var(--button-hover-bg-dark);
  --button-border: var(--button-border-dark);
  --button-text: var(--button-text-dark);
  --primary-focus: var(--primary-focus-dark);

  /* Settings Panel Base Variables */
  --surface-input: var(--surface-input-dark);
  --border-input: var(--border-input-dark);
  --focus-ring-accent: var(--focus-ring-accent-dark);
  --focus-ring-color: var(--focus-ring-color-dark);
  --text-secondary: var(--text-secondary-dark);
  --primary-contrast: var(--primary-contrast-dark);
  --surface-disabled: var(--surface-disabled-dark);
  --text-disabled: var(--text-disabled-dark);
  --surface-hover: var(--surface-hover-dark);
  --border-input-hover: var(--border-input-hover-dark);
}

/* Code block styling for Kanagawa Wave theme */
.bubbleContent pre {
  background: var(--code-block-bg-current) !important;
  border-left: 2px solid var(--code-block-border-current) !important;
  border-radius: 4px !important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15) !important;
  padding: 1em !important;
  margin: 0.8em 0 !important;
}

.bubbleContent pre code {
  color: var(--code-text-color-current) !important;
  font-family: 'JetBrains Mono', 'Consolas', monospace !important;
  font-size: 0.9em !important;
  line-height: 1.5 !important;
}

.bubbleContent code:not(pre code) {
  background: var(--inline-code-bg-current) !important;
  color: var(--code-text-color-current) !important;
  border: 1px solid var(--code-block-border-current) !important;
  border-radius: 3px !important;
  padding: 0.2em 0.4em !important;
  font-size: 0.85em !important;
  font-family: 'JetBrains Mono', 'Consolas', monospace !important;
}

/* Syntax highlighting for Kanagawa Wave theme */
.bubbleContent .hljs-keyword,
.bubbleContent .hljs-selector-tag,
.bubbleContent .hljs-title.function_ {
  color: var(--code-keyword-color, #7e9cd8) !important;
}

.bubbleContent .hljs-string,
.bubbleContent .hljs-attr {
  color: var(--code-string-color, #98bb6c) !important;
}

.bubbleContent .hljs-comment {
  color: var(--code-comment-color, #727169) !important;
}

.bubbleContent .hljs-variable,
.bubbleContent .hljs-template-variable,
.bubbleContent .hljs-regexp {
  color: var(--code-variable-color, #ff9e64) !important;
}

.bubbleContent .hljs-number,
.bubbleContent .hljs-literal {
  color: var(--code-number-color, #d27e99) !important;
}

.bubbleContent .hljs-type,
.bubbleContent .hljs-built_in {
  color: var(--code-type-color, #e46876) !important;
}

/* Light mode syntax highlighting */
body.light-mode .bubbleContent .hljs-keyword,
body.light-mode .bubbleContent .hljs-selector-tag,
body.light-mode .bubbleContent .hljs-title.function_ {
  color: var(--code-keyword-color-light, #5971b2) !important;
}

body.light-mode .bubbleContent .hljs-string,
body.light-mode .bubbleContent .hljs-attr {
  color: var(--code-string-color-light, #4d7839) !important;
}

body.light-mode .bubbleContent .hljs-comment {
  color: var(--code-comment-color-light, #888884) !important;
}

body.light-mode .bubbleContent .hljs-variable,
body.light-mode .bubbleContent .hljs-template-variable,
body.light-mode .bubbleContent .hljs-regexp {
  color: var(--code-variable-color-light, #c36a3c) !important;
}

body.light-mode .bubbleContent .hljs-number,
body.light-mode .bubbleContent .hljs-literal {
  color: var(--code-number-color-light, #a1556e) !important;
}

body.light-mode .bubbleContent .hljs-type,
body.light-mode .bubbleContent .hljs-built_in {
  color: var(--code-type-color-light, #a04d5e) !important;
}

/* --- Light Mode Overrides --- */
body.light-mode {
  /* Override root colors for light mode */
  --ui-text-primary: #364755; /* Darker Stone Blue/Grey for higher contrast */
  --input-text-color: #364755;
  --header-text-color: #c19a49; /* Darker Gold for light mode */
  --user-message-glow-color: #ff8c8c; /* Lighter Red/Orange */
  --backend-message-glow-color: #ffab70; /* Lighter Orange */
  --button-background-base: #6ca0d6; /* Override original mapping */
  --user-message-text-color: #364755; /* Dark text for user bubbles */
  --assistant-message-text-color: #364755; /* Dark text for assistant bubbles */
  --foreground: #364755; /* Text color for all messages in light mode */
  --bold-text-color: #c19a49; /* Darker gold for bold text in light mode */
  
  /* Chat Message Light Mode Overrides */
  --user-bubble-bg: rgba(255, 140, 140, 0.35); /* Stronger red tint for higher contrast */
  --user-bubble-border: rgba(255, 140, 140, 0.7); /* Bolder red border for better visibility */
  --user-bubble-glow: rgba(255, 140, 140, 0.25); /* Enhanced glow */
  --assistant-bubble-bg: rgba(255, 171, 112, 0.3); /* Higher contrast orange */
  --assistant-bubble-border: rgba(255, 171, 112, 0.65); /* Bolder orange border */
  --assistant-bubble-glow: rgba(255, 171, 112, 0.25); /* Enhanced glow */
  
  /* Tab Light Mode Overrides */
  --tab-inactive-bg: rgba(230, 240, 245, 0.8); /* Light variant of panel-bg-light */
  --tab-inactive-color: #7a7065; /* Match panel-tab-text-light */
  --tab-hover-bg: rgba(108, 160, 214, 0.15); /* Light blue from primary-light */
  --tab-hover-color: #5a8bc4; /* Darker blue on hover */
  --tab-active-bg: rgba(245, 245, 240, 0.9); /* Very light ivory from surface-light */
  --tab-active-color: #c19a49; /* Match header-text-color for gold accent */
  --tab-border-color: rgba(192, 200, 209, 0.8); /* Light border from border-input-light */
  --tab-active-border-color: rgba(193, 154, 73, 0.5); /* Gold border for active tab */
  --tab-container-border-color: rgba(192, 200, 209, 0.8); /* Light border below tabs */

  /* Base */
  --background: var(--background-light);
  --surface: var(--surface-light);
  --panel-bg-color: var(--panel-bg-light);
  --input-bg: var(--input-bg-light);
  --disabled-bg: var(--disabled-bg-light);
  --disabled-fg: var(--disabled-fg-light);

  /* Panel Tabs */
  --panel-tab-bg: var(--tab-inactive-bg, var(--panel-tab-bg-light));
  --panel-tab-active-bg: var(--tab-active-bg, var(--panel-tab-active-bg-light));
  --panel-tab-text: var(--tab-inactive-color, var(--panel-tab-text-light));
  --panel-tab-active-text: var(--tab-active-color, var(--panel-tab-active-text-light));
  --panel-container-bg: var(--panel-container-bg-light);
  
  /* Chat Bubble Styles - Light Mode */
  --surface-user-msg: var(--user-bubble-bg, var(--surface-light));
  --surface-backend-msg: var(--assistant-bubble-bg, var(--surface-light));

  /* Button Base Variables */
  --primary: var(--primary-light);
  --primary-hover: var(--primary-hover-light);
  --button-foreground: var(--button-foreground-light);
  --button-bg: var(--button-bg-light);
  --button-hover-bg: var(--button-hover-bg-light);
  --button-border: var(--button-border-light);
  --button-text: var(--button-text-light);
  --primary-focus: var(--primary-focus-light);

  /* Settings Panel Base Variables */
  --surface-input: var(--surface-input-light);
  --border-input: var(--border-input-light);
  --focus-ring-accent: var(--focus-ring-accent-light);
  --focus-ring-color: var(--focus-ring-color-light);
  --text-secondary: var(--text-secondary-light);
  --primary-contrast: var(--primary-contrast-light);
  --surface-disabled: var(--surface-disabled-light);
  --text-disabled: var(--text-disabled-light);
  --surface-hover: var(--surface-hover-light);
  --border-input-hover: var(--border-input-hover-light);
  --code-block-bg-current: var(--code-block-bg-light);
  --code-block-border-current: var(--code-block-border-light);
  --inline-code-bg-current: var(--inline-code-bg-light);
  --code-text-color-current: var(--code-text-color-light);
}
